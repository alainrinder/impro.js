/*! impro.js 22-03-2018 */

"use strict";var ImPro;!function(t){t.extends=function(e,t){return t.prototype=function(t,n){function r(){this.constructor=n.prototype.constructor}return r.prototype=e.prototype,new r}(0,t),t.prototype.ParentClass=e,t},t.super=function(t,n){t.ParentClass.apply(t,n)}}(ImPro=new function(){this.init=function(){}}),function(s){function t(t,n,r,e,i){var o=window[t+"Array"],a=s.channelProfiles[n];this.dataType=t,this.arrayType=o,this.channelProfile=n,this.channelCount=a,this.width=r,this.height=e,this.dx=a,this.dy=r*a,this.length=r*e*a,this.data=new o(this.length),(i instanceof o||i instanceof Array)&&this.data.set(i)}function n(e,i){s[e+i+"Image"]=s.extends(t,function(t,n,r){s.super(this,[e,i,t,n,r])})}for(var r in s.dataTypes=["Uint8Clamped","Uint8","Uint16","Uint32","Int8","Int16","Int32","Float32","Float64"],s.channelProfiles={Gray:1,Rgb:3,Rgba:4},s.dataTypes){var e=s.dataTypes[r];for(var i in s.channelProfiles)n(e,i)}}(ImPro),function(o){function t(t,n,r){this.name=n,this.defaultValue=r,this.valueType=t}o.BooleanProcessParam=o.extends(t,function(t,n){n=!!n,o.super(this,["boolean",t,n])}),o.NumberProcessParam=o.extends(t,function(t,n,r){r="number"==typeof r?r:0,o.super(this,["number",t,r])}),o.SelectProcessParam=o.extends(t,function(t,n,r){r=r in n?r:null,o.super(this,["string",t,r])}),o.Process=function(t,m,d,y,g){this.name=t,this.paramConfigs=m,this.inputConfigs=d,this.outputConfigs=y,this.run=function(t,n){for(var r in d){if(!(r in t))throw new Error('Missing input "'+r+'". Abort.');var e=t[r],i=d[r],o=!1;for(var a in i)o=o||e instanceof i[a];if(!o)throw new Error('Invalid type for input "'+r+'". Abort.')}for(var s in m){if(!(s in n))throw new Error('Missing param "'+s+'". Abort.');if(!(typeof n[s]===m[s].valueType))throw new Error('Invalid type for param "'+s+'". Abort.')}var f=g(t,n);for(var u in y){if(!(u in f))throw new Error('Missing output "'+u+'". Abort.');var h=f[u],p=y[u],c=!1;for(var l in p)c=c||h instanceof p[l];if(!c)throw new Error('Invalid type for output "'+u+'". Abort.')}return f}},o.testProcess=new o.Process("Test process",{},{Image:[o.Uint8ClampedGrayImage]},{Image:[o.Uint8ClampedGrayImage]},function(t){for(var n=t.Image,r=new o.Uint8ClampedGrayImage(n.width,n.height),e=0,i=n.length;e<i;++e)r.data[e]=255-n.data[e];return{Image:r}})}(ImPro);