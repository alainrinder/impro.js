/*! impro.js 23-03-2018 */

"use strict";ImPro=new function(){},function(t){t.extends=function(i,t){return t.prototype=function(t,n){function r(){this.constructor=n.prototype.constructor}return r.prototype=i.prototype,new r}(0,t),t.prototype.ParentClass=i,t},t.super=function(t,n){t.ParentClass.apply(t,n)}}(ImPro),function(a){function t(t,n,r,i,o){var e=window[t+"Array"],s=a.channelProfiles[n];this.dataType=t,this.arrayType=e,this.channelProfile=n,this.channelCount=s,this.width=r,this.height=i,this.dx=s,this.dy=r*s,this.length=r*i*s,this.data=new e(this.length),(o instanceof e||o instanceof Array)&&this.data.set(o)}function n(i,o){a[i+o+"Image"]=a.extends(t,function(t,n,r){a.super(this,[i,o,t,n,r])})}for(var r in a.dataTypes=["Uint8Clamped","Uint8","Uint16","Uint32","Int8","Int16","Int32","Float32","Float64"],a.channelProfiles={Gray:1,Rgb:3,Rgba:4},a.dataTypes){var i=a.dataTypes[r];for(var o in a.channelProfiles)n(i,o)}}(ImPro),function(i){function t(t,n,r){this.name=n,this.defaultValue=r,this.valueType=t}i.BooleanProcessParam=i.extends(t,function(t,n){n=!!n,i.super(this,["boolean",t,n])}),i.NumberProcessParam=i.extends(t,function(t,n,r){r="number"==typeof r?r:0,i.super(this,["number",t,r])}),i.SelectProcessParam=i.extends(t,function(t,n,r){r=r in n?r:null,i.super(this,["string",t,r])}),i.Process=function(t,y,d,w,m){this.name=t,this.paramConfigs=y,this.inputConfigs=d,this.outputConfigs=w,this.run=function(t,n){for(var r in d){if(!(r in t))throw new Error('Missing input "'+r+'". Abort.');var i=t[r],o=d[r],e=!1;for(var s in o)e=e||i instanceof o[s];if(!e)throw new Error('Invalid type for input "'+r+'". Abort.')}for(var a in y){if(!(a in n))throw new Error('Missing param "'+a+'". Abort.');if(!(typeof n[a]===y[a].valueType))throw new Error('Invalid type for param "'+a+'". Abort.')}var f=m(t,n);for(var u in w){if(!(u in f))throw new Error('Missing output "'+u+'". Abort.');var h=f[u],p=w[u],c=!1;for(var l in p)c=c||h instanceof p[l];if(!c)throw new Error('Invalid type for output "'+u+'". Abort.')}return f}}}(ImPro);